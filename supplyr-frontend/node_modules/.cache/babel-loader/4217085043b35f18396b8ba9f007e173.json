{"ast":null,"code":"import React, { useState, useEffect, Component } from 'react';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { toast } from 'react-toastify';\nimport Cookie from 'js-cookie';\nimport jwt_decode from 'jwt-decode';\n\nconst fetchUserData = async () => {\n  let token = Cookie.get('token');\n  let decoded = jwt_decode(token);\n  let username = decoded.sub;\n  const userUrl = `http://localhost:8080/api/v1/users/`;\n  const userResponse = await fetch(userUrl + username, {\n    method: 'GET',\n    headers: {\n      Authorization: 'Bearer ' + token,\n      accept: 'application/json',\n      'Content-Type': 'application/json'\n    }\n  });\n  const userData = await userResponse.json();\n  return userData;\n};\n\nclass Notificaition extends Component {\n  constructor() {\n    super();\n    this.state = {\n      user: null,\n      trades: 0\n    };\n    this.updateSelectedAsset = this.updateSelectedAsset.bind(this);\n    this.updateClickedState = this.updateClickedState.bind(this);\n  }\n\n  async componentDidMount() {\n    const dataObject = await fetchUserData();\n    this.setState({\n      user: dataObject.userData\n    });\n    setInterval(this.loadData, 30000);\n  }\n\n  async loadData() {\n    try {\n      const res = await fetchUserData();\n      this.setState({\n        user: res\n      });\n      console.log(this.state.user);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n}\n\nexport default Notificaition;","map":{"version":3,"sources":["/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr-frontend/src/components/Notificaition/Notification.js"],"names":["React","useState","useEffect","Component","toast","Cookie","jwt_decode","fetchUserData","token","get","decoded","username","sub","userUrl","userResponse","fetch","method","headers","Authorization","accept","userData","json","Notificaition","constructor","state","user","trades","updateSelectedAsset","bind","updateClickedState","componentDidMount","dataObject","setState","setInterval","loadData","res","console","log","e"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,SAArC,QAAsD,OAAtD;AACA,OAAO,uCAAP;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,UAAP,MAAuB,YAAvB;;AAEA,MAAMC,aAAa,GAAG,YAAY;AAChC,MAAIC,KAAK,GAAGH,MAAM,CAACI,GAAP,CAAW,OAAX,CAAZ;AACA,MAAIC,OAAO,GAAGJ,UAAU,CAACE,KAAD,CAAxB;AACA,MAAIG,QAAQ,GAAGD,OAAO,CAACE,GAAvB;AAEA,QAAMC,OAAO,GAAI,qCAAjB;AACA,QAAMC,YAAY,GAAG,MAAMC,KAAK,CAACF,OAAO,GAAGF,QAAX,EAAqB;AACnDK,IAAAA,MAAM,EAAE,KAD2C;AAEnDC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAE,YAAYV,KADpB;AAEPW,MAAAA,MAAM,EAAE,kBAFD;AAGP,sBAAgB;AAHT;AAF0C,GAArB,CAAhC;AAQA,QAAMC,QAAQ,GAAG,MAAMN,YAAY,CAACO,IAAb,EAAvB;AAEA,SAAOD,QAAP;AACD,CAjBD;;AAmBA,MAAME,aAAN,SAA4BnB,SAA5B,CAAsC;AACpCoB,EAAAA,WAAW,GAAG;AACZ;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE,IADK;AAEXC,MAAAA,MAAM,EAAE;AAFG,KAAb;AAIA,SAAKC,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKC,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBD,IAAxB,CAA6B,IAA7B,CAA1B;AACD;;AAEsB,QAAjBE,iBAAiB,GAAG;AACxB,UAAMC,UAAU,GAAG,MAAMxB,aAAa,EAAtC;AAEA,SAAKyB,QAAL,CAAc;AACZP,MAAAA,IAAI,EAAEM,UAAU,CAACX;AADL,KAAd;AAGAa,IAAAA,WAAW,CAAC,KAAKC,QAAN,EAAgB,KAAhB,CAAX;AACD;;AAEa,QAARA,QAAQ,GAAG;AACf,QAAI;AACF,YAAMC,GAAG,GAAG,MAAM5B,aAAa,EAA/B;AACA,WAAKyB,QAAL,CAAc;AACZP,QAAAA,IAAI,EAAEU;AADM,OAAd;AAGAC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKb,KAAL,CAAWC,IAAvB;AACD,KAND,CAME,OAAOa,CAAP,EAAU;AACVF,MAAAA,OAAO,CAACC,GAAR,CAAYC,CAAZ;AACD;AACF;;AA9BmC;;AAiCtC,eAAehB,aAAf","sourcesContent":["import React, { useState, useEffect, Component } from 'react';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { toast } from 'react-toastify';\nimport Cookie from 'js-cookie';\nimport jwt_decode from 'jwt-decode';\n\nconst fetchUserData = async () => {\n  let token = Cookie.get('token');\n  let decoded = jwt_decode(token);\n  let username = decoded.sub;\n\n  const userUrl = `http://localhost:8080/api/v1/users/`;\n  const userResponse = await fetch(userUrl + username, {\n    method: 'GET',\n    headers: {\n      Authorization: 'Bearer ' + token,\n      accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n  });\n  const userData = await userResponse.json();\n\n  return userData;\n};\n\nclass Notificaition extends Component {\n  constructor() {\n    super();\n    this.state = {\n      user: null,\n      trades: 0,\n    };\n    this.updateSelectedAsset = this.updateSelectedAsset.bind(this);\n    this.updateClickedState = this.updateClickedState.bind(this);\n  }\n\n  async componentDidMount() {\n    const dataObject = await fetchUserData();\n\n    this.setState({\n      user: dataObject.userData,\n    });\n    setInterval(this.loadData, 30000);\n  }\n\n  async loadData() {\n    try {\n      const res = await fetchUserData();\n      this.setState({\n        user: res,\n      });\n      console.log(this.state.user);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n}\n\nexport default Notificaition;\n"]},"metadata":{},"sourceType":"module"}