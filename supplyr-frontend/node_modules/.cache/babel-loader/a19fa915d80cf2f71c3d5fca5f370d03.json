{"ast":null,"code":"import _slicedToArray from\"/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useState}from'react';import'./Orders.css';import{Container,Row,Col,Spinner}from'react-bootstrap';import{Line}from'react-chartjs-2';import Cookies from'js-cookie';import jwtDecode from'jwt-decode';import{Chart}from'./Chart';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getAssetPriceData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(asset,setResponse){var url,token,decoded;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url='http://localhost:8080/api/v1/assets/'+asset+'/trades';token=Cookies.get('token');decoded=jwtDecode(token);return _context.abrupt(\"return\",fetch(url,{method:'GET',headers:{Authorization:'Bearer '+token,accept:'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(data){setResponse(data);return data;}).catch(function(error){console.log(error.message);setResponse(error);}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function getAssetPriceData(_x,_x2){return _ref.apply(this,arguments);};}();var getAssetStats=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(asset){var url,token,decoded;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url='http://localhost:8080/api/v1/assets/'+asset+'/offer-info';token=Cookies.get('token');decoded=jwtDecode(token);console.log(url);return _context2.abrupt(\"return\",fetch(url,{method:'GET',headers:{Authorization:'Bearer '+token,accept:'application/json'}}).then(function(res){return res.json();}).then(function(data){return data;}).catch(function(error){console.log(error.message);}));case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getAssetStats(_x3){return _ref2.apply(this,arguments);};}();export var AssetInfo=function AssetInfo(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),tradeData=_useState2[0],setTradeData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),response=_useState6[0],setResponse=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),assetStatsResponse=_useState8[0],setAssetStatsResponse=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),dataset=_useState10[0],setDataset=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),lables=_useState12[0],setlabels=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),lowestAsk=_useState14[0],setLowestAsk=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),highestBid=_useState16[0],setHighestBid=_useState16[1];useEffect(function(){getAssetPriceData(props.asset,setResponse).then(function(data){setTradeData(data);});getAssetStats(props.asset).then(function(data){console.log(data);setLowestAsk(data.lowestAsk);setHighestBid(data.highestBid);setLoading(false);});},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"secondary\"})});}else{return/*#__PURE__*/_jsxs(Container,{className:\"orders-container\",children:[' ',/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times-circle icon\",onClick:function onClick(){props.updateClickedState('ASSET_FALSE');history.push(\"/home\");}}),/*#__PURE__*/_jsxs(\"h3\",{className:\"title\",children:[\"Asset Information \",props.asset]}),/*#__PURE__*/_jsxs(Row,{className:\"column\",children:[/*#__PURE__*/_jsx(Col,{className:\"column\",children:tradeData!==null&&tradeData.length>1?/*#__PURE__*/_jsx(Chart,{tradeData:tradeData,asset:props.asset}):/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:/*#__PURE__*/_jsx(\"p\",{className:\"no-info\",children:\"No Asset Pricing Data\"})})}),/*#__PURE__*/_jsx(Col,{className:\"column\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-narrow\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"items-text\",children:[\"Lowest Ask: \",lowestAsk>0?lowestAsk:'No Asks']}),/*#__PURE__*/_jsxs(\"p\",{className:\"items-text\",children:[\"Highest Bid: \",highestBid>0?highestBid:'No Bids']}),tradeData!==null&&tradeData.length>1?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"items-text\",children:[\"Last Sale Price: \",tradeData[tradeData.length-1].price]}),/*#__PURE__*/_jsxs(\"p\",{className:\"items-text\",children:[\"Number of Sales: \",tradeData.length/2]})]}):null]})})]})]});}};","map":{"version":3,"sources":["/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/src/components/Overview/AssetInfo.js"],"names":["React","useEffect","useState","Container","Row","Col","Spinner","Line","Cookies","jwtDecode","Chart","getAssetPriceData","asset","setResponse","url","token","get","decoded","fetch","method","headers","Authorization","accept","then","res","json","data","catch","error","console","log","message","getAssetStats","AssetInfo","props","tradeData","setTradeData","loading","setLoading","response","assetStatsResponse","setAssetStatsResponse","dataset","setDataset","lables","setlabels","lowestAsk","setLowestAsk","highestBid","setHighestBid","updateClickedState","history","push","length","price"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './Orders.css';\nimport { Container, Row, Col, Spinner } from 'react-bootstrap';\nimport { Line } from 'react-chartjs-2';\nimport Cookies from 'js-cookie';\nimport jwtDecode from 'jwt-decode';\nimport { Chart } from './Chart';\n\nconst getAssetPriceData = async (asset, setResponse) => {\n  const url = 'http://localhost:8080/api/v1/assets/' + asset + '/trades';\n  const token = Cookies.get('token');\n  const decoded = jwtDecode(token);\n\n  return fetch(url, {\n    method: 'GET',\n    headers: {\n      Authorization: 'Bearer ' + token,\n      accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n  })\n    .then((res) => res.json())\n    .then((data) => {\n      setResponse(data);\n      return data;\n    })\n    .catch((error) => {\n      console.log(error.message);\n      setResponse(error);\n    });\n};\n\nconst getAssetStats = async (asset) => {\n  const url = 'http://localhost:8080/api/v1/assets/' + asset + '/offer-info';\n  const token = Cookies.get('token');\n  const decoded = jwtDecode(token);\n\n  console.log(url);\n  return fetch(url, {\n    method: 'GET',\n    headers: {\n      Authorization: 'Bearer ' + token,\n      accept: 'application/json',\n    },\n  })\n    .then((res) => res.json())\n    .then((data) => {\n      return data;\n    })\n    .catch((error) => {\n      console.log(error.message);\n    });\n};\n\nexport const AssetInfo = (props) => {\n  const [tradeData, setTradeData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [response, setResponse] = useState(null);\n  const [assetStatsResponse, setAssetStatsResponse] = useState(null);\n  const [dataset, setDataset] = useState(null);\n  const [lables, setlabels] = useState(null);\n  const [lowestAsk, setLowestAsk] = useState(null);\n  const [highestBid, setHighestBid] = useState(null);\n\n  useEffect(() => {\n    getAssetPriceData(props.asset, setResponse).then((data) => {\n      setTradeData(data);\n    });\n\n    getAssetStats(props.asset).then((data) => {\n      console.log(data);\n      setLowestAsk(data.lowestAsk);\n      setHighestBid(data.highestBid);\n      setLoading(false);\n    });\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <Spinner animation=\"border\" variant=\"secondary\" />\n      </div>\n    );\n  } else {\n    return (\n      <Container className=\"orders-container\">\n        {' '}\n        <i\n          className=\"fas fa-times-circle icon\"\n          onClick={() => {\n            props.updateClickedState('ASSET_FALSE');\n            history.push(\"/home\")\n          }}\n        ></i>\n        <h3 className=\"title\">Asset Information {props.asset}</h3>\n        <Row className=\"column\">\n          <Col className=\"column\">\n            {tradeData !== null && tradeData.length > 1 ? (\n              <Chart tradeData={tradeData} asset={props.asset} />\n            ) : (\n              <div className=\"chart-container\">\n                <p className=\"no-info\">No Asset Pricing Data</p>\n              </div>\n            )}\n          </Col>\n          <Col className=\"column\">\n            <div className=\"card-narrow\">\n              <p className=\"items-text\">\n                Lowest Ask: {lowestAsk > 0 ? lowestAsk : 'No Asks'}\n              </p>\n              <p className=\"items-text\">\n                Highest Bid: {highestBid > 0 ? highestBid : 'No Bids'}\n              </p>\n              {tradeData !== null && tradeData.length > 1 ? (\n                <div>\n                  <p className=\"items-text\">\n                    Last Sale Price: {tradeData[tradeData.length - 1].price}\n                  </p>\n                  <p className=\"items-text\">\n                    Number of Sales: {tradeData.length / 2}\n                  </p>\n                </div>\n              ) : null}\n            </div>\n          </Col>\n        </Row>\n      </Container>\n    );\n  }\n};\n"]},"metadata":{},"sourceType":"module"}