{"ast":null,"code":"import _slicedToArray from\"/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import{Tab,Container,Nav,Row,Col,Form,Dropdown,DropdownButton,Button}from'react-bootstrap';import'./Admin.css';import'bootstrap/dist/css/bootstrap.min.css';import Cookies from'js-cookie';import styles from'../BootstrapStyles/styles';import{UnitDropdown}from'../UI/UnitDropdown';import'react-toastify/dist/ReactToastify.css';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";toast.configure();var createUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(organisationalUnit,username,password,role,setResponse){var url,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url='http://localhost:8080/api/v1/users/';token=Cookies.get('token');organisationalUnit=role==='ADMIN'?'admin':organisationalUnit;return _context.abrupt(\"return\",fetch(url+organisationalUnit,{method:'POST',headers:{Authorization:'Bearer '+token,accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})}).then(function(res){return res.json();}).then(function(data){console.log(data.status);setResponse(data);}).catch(function(error){console.log(error.message);setResponse(error);}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function createUser(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments);};}();var success=function success(setResponse){toast.success('New user created! ',{position:toast.POSITION.BOTTOM_RIGHT});setResponse(null);};var error=function error(_error,setResponse){toast.error(_error,{position:toast.POSITION.BOTTOM_RIGHT});setResponse(null);};export var User=function User(){var _useState=useState('ROLE'),_useState2=_slicedToArray(_useState,2),role=_useState2[0],setRole=_useState2[1];var _useState3=useState('Select Unit'),_useState4=_slicedToArray(_useState3,2),organisationalUnit=_useState4[0],setOrganisaationalUnit=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),response=_useState10[0],setResponse=_useState10[1];return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"admin-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"admin-card-title\",children:\"Create User\"}),/*#__PURE__*/_jsxs(Form,{className:\"admin-form\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"admin-input-title\",children:\"User details\"}),/*#__PURE__*/_jsx(\"input\",{className:\"admin-input\",placeholder:\"Username...\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"admin-input\",type:\"password\",placeholder:\"Password...\",onChange:function onChange(e){return setPassword(e.target.value);}}),role==='USER'?/*#__PURE__*/_jsx(UnitDropdown,{setUnit:setOrganisaationalUnit,selectedUnit:organisationalUnit}):null]}),response?response.status==='CONFLICT'?error(response.message,setResponse):success(setResponse):null,/*#__PURE__*/_jsxs(DropdownButton,{title:role,className:\"user-dropdown\",variant:\"secondary\",children:[/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return setRole('USER');},children:\"USER\"}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:function onClick(){return setRole('ADMIN');},children:\"ADMIN\"})]}),username&&password&&role==='ADMIN'?/*#__PURE__*/_jsx(Button,{variant:\"secondary\",className:\"user-button \",onClick:function onClick(){createUser(organisationalUnit,username,password,role,setResponse);},children:\"Submit\"}):username&&password&&role==='USER'&&organisationalUnit!='Select Unit'?/*#__PURE__*/_jsx(Button,{variant:\"secondary\",className:\"user-button \",onClick:function onClick(){createUser(organisationalUnit,username,password,role,setResponse);},children:\"Submit\"}):/*#__PURE__*/_jsx(Button,{disabled:true,className:\"user-button \",variant:\"secondary\",children:\"Submit\"})]})});};","map":{"version":3,"sources":["/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/src/components/Admin/User.js"],"names":["React","useState","Tab","Container","Nav","Row","Col","Form","Dropdown","DropdownButton","Button","Cookies","styles","UnitDropdown","toast","configure","createUser","organisationalUnit","username","password","role","setResponse","url","token","get","fetch","method","headers","Authorization","accept","body","JSON","stringify","then","res","json","data","console","log","status","catch","error","message","success","position","POSITION","BOTTOM_RIGHT","User","setRole","setOrganisaationalUnit","setUsername","setPassword","response","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport {\n  Tab,\n  Container,\n  Nav,\n  Row,\n  Col,\n  Form,\n  Dropdown,\n  DropdownButton,\n  Button,\n} from 'react-bootstrap';\nimport './Admin.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Cookies from 'js-cookie';\nimport styles from '../BootstrapStyles/styles';\nimport { UnitDropdown } from '../UI/UnitDropdown';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { toast } from 'react-toastify';\n\ntoast.configure();\n\nconst createUser = async (\n  organisationalUnit,\n  username,\n  password,\n  role,\n  setResponse\n) => {\n  const url = 'http://localhost:8080/api/v1/users/';\n  const token = Cookies.get('token');\n  organisationalUnit = role === 'ADMIN' ? 'admin' : organisationalUnit;\n\n  return fetch(url + organisationalUnit, {\n    method: 'POST',\n    headers: {\n      Authorization: 'Bearer ' + token,\n      accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ username: username, password: password }),\n  })\n    .then((res) => res.json())\n    .then((data) => {\n      console.log(data.status);\n      setResponse(data);\n    })\n    .catch((error) => {\n      console.log(error.message);\n      setResponse(error);\n    });\n};\n\nconst success = (setResponse) => {\n  toast.success('New user created! ', {\n    position: toast.POSITION.BOTTOM_RIGHT,\n  });\n  setResponse(null);\n};\n\nconst error = (error, setResponse) => {\n  toast.error(error, {\n    position: toast.POSITION.BOTTOM_RIGHT,\n  });\n  setResponse(null);\n};\n\nexport const User = () => {\n  const [role, setRole] = useState('ROLE');\n  const [organisationalUnit, setOrganisaationalUnit] = useState('Select Unit');\n  const [username, setUsername] = useState(null);\n  const [password, setPassword] = useState(null);\n  const [response, setResponse] = useState(null);\n\n  return (\n    <Container>\n      <div className=\"admin-card\">\n        <h2 className=\"admin-card-title\">Create User</h2>\n        <Form className=\"admin-form\">\n          <p className=\"admin-input-title\">User details</p>\n          <input\n            className=\"admin-input\"\n            placeholder=\"Username...\"\n            onChange={(e) => setUsername(e.target.value)}\n          ></input>\n          <input\n            className=\"admin-input\"\n            type=\"password\"\n            placeholder=\"Password...\"\n            onChange={(e) => setPassword(e.target.value)}\n          ></input>\n          {role === 'USER' ? (\n            <UnitDropdown\n              setUnit={setOrganisaationalUnit}\n              selectedUnit={organisationalUnit}\n            />\n          ) : null}\n        </Form>\n        {response\n          ? response.status === 'CONFLICT'\n            ? error(response.message, setResponse)\n            : success(setResponse)\n          : null}\n\n        <DropdownButton\n          title={role}\n          className=\"user-dropdown\"\n          variant=\"secondary\"\n        >\n          <Dropdown.Item onClick={() => setRole('USER')}>USER</Dropdown.Item>\n          <Dropdown.Item onClick={() => setRole('ADMIN')}>ADMIN</Dropdown.Item>\n        </DropdownButton>\n        {username && password && role === 'ADMIN' ? (\n          <Button\n            variant=\"secondary\"\n            className=\"user-button \"\n            onClick={() => {\n              createUser(\n                organisationalUnit,\n                username,\n                password,\n                role,\n                setResponse\n              );\n            }}\n          >\n            Submit\n          </Button>\n        ) : username &&\n          password &&\n          role === 'USER' &&\n          organisationalUnit != 'Select Unit' ? (\n          <Button\n            variant=\"secondary\"\n            className=\"user-button \"\n            onClick={() => {\n              createUser(\n                organisationalUnit,\n                username,\n                password,\n                role,\n                setResponse\n              );\n            }}\n          >\n            Submit\n          </Button>\n        ) : (\n          <Button disabled className=\"user-button \" variant=\"secondary\">\n            Submit\n          </Button>\n        )}\n      </div>\n    </Container>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}