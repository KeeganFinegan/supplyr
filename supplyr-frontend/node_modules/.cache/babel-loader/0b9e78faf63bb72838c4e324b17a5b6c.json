{"ast":null,"code":"import _regeneratorRuntime from\"/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Redirect}from'react-router-dom';import Cookie from'js-cookie';import'./Login.css';import jwt_decode from'jwt-decode';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginAction(props){if(props.response.error){return/*#__PURE__*/_jsx(\"p\",{children:\"Invalid Login Details\"});}else if(props.response.token){Cookie.set('token',props.response.token);return/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/home'}});}return/*#__PURE__*/_jsx(\"div\",{});}export var Login=function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),response=_useState6[0],setResponse=_useState6[1];var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();url='http://localhost:8080/api/v1/login';return _context.abrupt(\"return\",fetch(url,{method:'POST',headers:{accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})}).then(function(res){return res.json();}).then(function(data){setResponse(data);}).catch(function(error){console.log('errir');setResponse(error);}));case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-outer-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"logo\",children:\"supplyr\"}),/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-inner-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Login\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"username...\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password...\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"login-button\",type:\"button\",onClick:handleLogin,children:\"Login\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:/*#__PURE__*/_jsx(LoginAction,{response:response,setUser:props.setUser})})]})});};","map":{"version":3,"sources":["/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/src/components/Login/Login.js"],"names":["React","useState","Redirect","Cookie","jwt_decode","LoginAction","props","response","error","token","set","pathname","Login","username","setUsername","password","setPassword","setResponse","handleLogin","e","preventDefault","url","fetch","method","headers","accept","body","JSON","stringify","then","res","json","data","catch","console","log","target","value","setUser"],"mappings":"mnBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,C,wFAEA,QAASC,CAAAA,WAAT,CAAqBC,KAArB,CAA4B,CAC1B,GAAIA,KAAK,CAACC,QAAN,CAAeC,KAAnB,CAA0B,CACxB,mBAAO,4CAAP,CACD,CAFD,IAEO,IAAIF,KAAK,CAACC,QAAN,CAAeE,KAAnB,CAA0B,CAC/BN,MAAM,CAACO,GAAP,CAAW,OAAX,CAAoBJ,KAAK,CAACC,QAAN,CAAeE,KAAnC,EAEA,mBACE,KAAC,QAAD,EACE,EAAE,CAAE,CACFE,QAAQ,CAAE,OADR,CADN,EADF,CAOD,CACD,mBAAO,cAAP,CACD,CAED,MAAO,IAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACN,KAAD,CAAW,eACEL,QAAQ,CAAC,EAAD,CADV,wCACvBY,QADuB,eACbC,WADa,8BAEEb,QAAQ,CAAC,EAAD,CAFV,yCAEvBc,QAFuB,eAEbC,WAFa,8BAGEf,QAAQ,CAAC,EAAD,CAHV,yCAGvBM,QAHuB,eAGbU,WAHa,eAK9B,GAAMC,CAAAA,WAAW,0FAAG,iBAAOC,CAAP,0HAClBA,CAAC,CAACC,cAAF,GACMC,GAFY,CAEN,oCAFM,iCAIXC,KAAK,CAACD,GAAD,CAAM,CAChBE,MAAM,CAAE,MADQ,CAEhBC,OAAO,CAAE,CACPC,MAAM,CAAE,kBADD,CAEP,eAAgB,kBAFT,CAFO,CAMhBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEf,QAAQ,CAAEA,QAAZ,CAAsBE,QAAQ,CAAEA,QAAhC,CAAf,CANU,CAAN,CAAL,CAQJc,IARI,CAQC,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EARD,EASJF,IATI,CASC,SAACG,IAAD,CAAU,CACdf,WAAW,CAACe,IAAD,CAAX,CACD,CAXI,EAYJC,KAZI,CAYE,SAACzB,KAAD,CAAW,CAChB0B,OAAO,CAACC,GAAR,CAAY,OAAZ,EACAlB,WAAW,CAACT,KAAD,CAAX,CACD,CAfI,CAJW,wDAAH,kBAAXU,CAAAA,WAAW,4CAAjB,CAsBA,mBACE,YAAK,SAAS,CAAC,SAAf,uBACE,aAAK,SAAS,CAAC,uBAAf,wBACE,WAAI,SAAS,CAAC,MAAd,qBADF,cAEE,YAAK,SAAS,CAAC,iBAAf,uBACE,aAAK,SAAS,CAAC,uBAAf,wBACE,kCADF,cAEE,cAAM,SAAS,CAAC,MAAhB,wBACE,cACE,WAAW,CAAC,aADd,CAEE,QAAQ,CAAE,kBAACC,CAAD,QAAOL,CAAAA,WAAW,CAACK,CAAC,CAACiB,MAAF,CAASC,KAAV,CAAlB,EAFZ,EADF,cAKE,cACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,aAFd,CAGE,QAAQ,CAAE,kBAAClB,CAAD,QAAOH,CAAAA,WAAW,CAACG,CAAC,CAACiB,MAAF,CAASC,KAAV,CAAlB,EAHZ,EALF,cAUE,eACE,SAAS,CAAC,cADZ,CAEE,IAAI,CAAC,QAFP,CAGE,OAAO,CAAEnB,WAHX,mBAVF,GAFF,GADF,EAFF,cAyBE,YAAK,SAAS,CAAC,OAAf,uBACE,KAAC,WAAD,EAAa,QAAQ,CAAEX,QAAvB,CAAiC,OAAO,CAAED,KAAK,CAACgC,OAAhD,EADF,EAzBF,GADF,EADF,CAiCD,CA5DM","sourcesContent":["import React, { useState } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Cookie from 'js-cookie';\nimport './Login.css';\nimport jwt_decode from 'jwt-decode';\n\nfunction LoginAction(props) {\n  if (props.response.error) {\n    return <p>Invalid Login Details</p>;\n  } else if (props.response.token) {\n    Cookie.set('token', props.response.token);\n\n    return (\n      <Redirect\n        to={{\n          pathname: '/home',\n        }}\n      ></Redirect>\n    );\n  }\n  return <div></div>;\n}\n\nexport const Login = (props) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [response, setResponse] = useState('');\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    const url = 'http://localhost:8080/api/v1/login';\n\n    return fetch(url, {\n      method: 'POST',\n      headers: {\n        accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ username: username, password: password }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setResponse(data);\n      })\n      .catch((error) => {\n        console.log('errir');\n        setResponse(error);\n      });\n  };\n\n  return (\n    <div className=\"wrapper\">\n      <div className=\"login-outer-container\">\n        <h1 className=\"logo\">supplyr</h1>\n        <div className=\"login-container\">\n          <div className=\"login-inner-container\">\n            <h2>User Login</h2>\n            <form className=\"form\">\n              <input\n                placeholder=\"username...\"\n                onChange={(e) => setUsername(e.target.value)}\n              ></input>\n              <input\n                type=\"password\"\n                placeholder=\"password...\"\n                onChange={(e) => setPassword(e.target.value)}\n              ></input>\n              <button\n                className=\"login-button\"\n                type=\"button\"\n                onClick={handleLogin}\n              >\n                Login\n              </button>\n            </form>\n          </div>\n        </div>\n        <div className=\"error\">\n          <LoginAction response={response} setUser={props.setUser} />\n        </div>\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}