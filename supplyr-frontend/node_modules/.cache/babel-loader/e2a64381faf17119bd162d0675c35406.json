{"ast":null,"code":"import _slicedToArray from\"/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import{Container,Form,Button,Alert}from'react-bootstrap';import'./Account.css';import'bootstrap/dist/css/bootstrap.min.css';import Cookies from'js-cookie';import'react-toastify/dist/ReactToastify.css';import jwtDecode from'jwt-decode';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";toast.configure();var notify=function notify(setResponse){toast.success('Password successfully changed',{position:toast.POSITION.BOTTOM_RIGHT});setResponse(null);};var updatePassword=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(password,setResponse){var url,token,decoded;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url='http://localhost:8080/api/v1/users/';token=Cookies.get('token');decoded=jwtDecode(token);return _context.abrupt(\"return\",fetch(url+decoded.sub,{method:'PUT',headers:{Authorization:'Bearer '+token,accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({password:password})}).then(function(res){return res.json();}).then(function(data){console.log(data);setResponse(data);}).catch(function(error){console.log(error.message);setResponse(error);}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function updatePassword(_x,_x2){return _ref.apply(this,arguments);};}();var handleSubmit=function handleSubmit(password,confirm,setResponse){if(password!==confirm){setResponse({status:'NO_MATCH',message:'passwords do not match'});}else{updatePassword(password,setResponse);}};export var PasswordReset=function PasswordReset(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),confirm=_useState4[0],setConfirm=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),response=_useState6[0],setResponse=_useState6[1];return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"admin-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"admin-card-title\",children:\"Password Reset\"}),/*#__PURE__*/_jsxs(Form,{className:\"admin-form\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"admin-input-title\",children:\"New password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"admin-input\",placeholder:\"new password...\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"admin-input\",placeholder:\"confirm password...\",onChange:function onChange(e){setConfirm(e.target.value);}})]}),response?response.status==='NOT_FOUND'||response.status==='NO_MATCH'?/*#__PURE__*/_jsx(\"p\",{className:\"response-status-error\",children:response.message}):notify(setResponse):null,password&&confirm?/*#__PURE__*/_jsx(Button,{variant:\"secondary\",className:\"user-button \",onClick:function onClick(){handleSubmit(password,confirm,setResponse);},children:\"Submit\"}):/*#__PURE__*/_jsx(Button,{disabled:true,className:\"user-button \",variant:\"secondary\",children:\"Submit\"})]})});};","map":{"version":3,"sources":["/Users/keeganfinegan/Documents/2021/SoftwareDevelopment/Assignment/supplyr/supplyr-frontend/src/components/Account/PasswordReset.js"],"names":["React","useState","Container","Form","Button","Alert","Cookies","jwtDecode","toast","configure","notify","setResponse","success","position","POSITION","BOTTOM_RIGHT","updatePassword","password","url","token","get","decoded","fetch","sub","method","headers","Authorization","accept","body","JSON","stringify","then","res","json","data","console","log","catch","error","message","handleSubmit","confirm","status","PasswordReset","setPassword","setConfirm","response","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Container, Form, Button, Alert } from 'react-bootstrap';\nimport './Account.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Cookies from 'js-cookie';\nimport 'react-toastify/dist/ReactToastify.css';\nimport jwtDecode from 'jwt-decode';\nimport { toast } from 'react-toastify';\n\ntoast.configure();\n\nconst notify = (setResponse) => {\n  toast.success('Password successfully changed', {\n    position: toast.POSITION.BOTTOM_RIGHT,\n  });\n  setResponse(null);\n};\nconst updatePassword = async (password, setResponse) => {\n  const url = 'http://localhost:8080/api/v1/users/';\n  const token = Cookies.get('token');\n  const decoded = jwtDecode(token);\n\n  return fetch(url + decoded.sub, {\n    method: 'PUT',\n    headers: {\n      Authorization: 'Bearer ' + token,\n      accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ password: password }),\n  })\n    .then((res) => res.json())\n    .then((data) => {\n      console.log(data);\n      setResponse(data);\n    })\n    .catch((error) => {\n      console.log(error.message);\n      setResponse(error);\n    });\n};\n\nconst handleSubmit = (password, confirm, setResponse) => {\n  if (password !== confirm) {\n    setResponse({\n      status: 'NO_MATCH',\n      message: 'passwords do not match',\n    });\n  } else {\n    updatePassword(password, setResponse);\n  }\n};\n\nexport const PasswordReset = () => {\n  const [password, setPassword] = useState(null);\n  const [confirm, setConfirm] = useState(null);\n  const [response, setResponse] = useState(null);\n\n  return (\n    <Container>\n      <div className=\"admin-card\">\n        <h2 className=\"admin-card-title\">Password Reset</h2>\n        <Form className=\"admin-form\">\n          <p className=\"admin-input-title\">New password</p>\n          <input\n            type=\"password\"\n            className=\"admin-input\"\n            placeholder=\"new password...\"\n            onChange={(e) => setPassword(e.target.value)}\n          ></input>\n          <input\n            type=\"password\"\n            className=\"admin-input\"\n            placeholder=\"confirm password...\"\n            onChange={(e) => {\n              setConfirm(e.target.value);\n            }}\n          ></input>\n        </Form>\n        {response ? (\n          response.status === 'NOT_FOUND' || response.status === 'NO_MATCH' ? (\n            <p className=\"response-status-error\">{response.message}</p>\n          ) : (\n            notify(setResponse)\n          )\n        ) : null}\n\n        {password && confirm ? (\n          <Button\n            variant=\"secondary\"\n            className=\"user-button \"\n            onClick={() => {\n              handleSubmit(password, confirm, setResponse);\n            }}\n          >\n            Submit\n          </Button>\n        ) : (\n          <Button disabled className=\"user-button \" variant=\"secondary\">\n            Submit\n          </Button>\n        )}\n      </div>\n    </Container>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}